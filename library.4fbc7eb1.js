var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequire78b5;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},e.parcelRequire78b5=n);var r=n("jfYt8"),i=n("krGWQ");function s(e){i.refs.slickSlider.innerHTML=e.map((({original_title:e,poster_path:t,vote_average:o,movie_id:n,name:i})=>`<div class="slider__item"><img class="slider-image" src=${r.IMG_URL}${t} alt="${e}${i}" data-id="${n}" onerror="this.onerror=null;this.src="https://i.postimg.cc/6pzyh7Wc/pngwing-com.png";" /><span class="trending-raiting">${o.toFixed(1)}</span></div>`)).join(""),$(".slider").slick({arrows:!1,centerMode:!0,lazyLoad:"progressive",autoplay:!0,autoplaySpeed:1e3,infinite:!0,speed:1e3,adaptiveHeigt:!0,cssEase:"ease",slidesToShow:8,responsive:[{breakpoint:1100,settings:{slidesToShow:6,infinite:!0}},{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:480,settings:{slidesToShow:2}}]})}fetch("https://api.themoviedb.org/3/trending/all/day?api_key=2b316c342fe13f9049052886494c29f1").then((e=>e.json())).then((({results:e})=>e)).then(s).catch((e=>console.log(e))),n("ctnTC"),n("688Bf"),n("9hR6i"),n("j8htv"),n("1VOaQ"),n("4bOKh");var a=n("4S0r6"),c=(r=n("jfYt8"),n("ldhCG")),l=n("e96jb"),d=n("7Sa78"),h=n("cWqtQ"),g=n("gKkQl"),u=n("eyjy7"),p=n("ftYLF");const m=(0,g.initializeApp)({apiKey:"AIzaSyAQNEF1EZQq4hRQq21AEqmnTA4ysock-bY",authDomain:"filmoteka-77997.firebaseapp.com",projectId:"filmoteka-77997",storageBucket:"filmoteka-77997.appspot.com",messagingSenderId:"555325927364",appId:"1:555325927364:web:5f447ca8d4265db75c3e91",measurementId:"G-LZ05WYL8RJ"}),v=(0,u.getAuth)(m),f=(0,p.getFirestore)(m),w=document.querySelector(".library__watched-btn"),y=document.querySelector(".library__queue-btn"),b=document.querySelector(".trending-movies__list");async function k(e){const t=e.map((async e=>await r.themoviedbApi.getMovieById(e)));return await Promise.all(t)}h.btnLogin.addEventListener("click",(async()=>{const e=txtEmail.value,t=txtPassword.value;try{await(0,u.signInWithEmailAndPassword)(v,e,t)}catch(e){console.log(`There was an error: ${e}`),(0,h.showLoginError)(e)}})),h.btnSignup.addEventListener("click",(async()=>{const e=txtEmail.value,t=txtPassword.value;try{const o=await(0,u.createUserWithEmailAndPassword)(v,e,t),n=(0,p.doc)(f,"users",o.user.uid);(async()=>{try{await(0,p.setDoc)(n,{email:e}),console.log("This user has been written to the Firestore")}catch{console.log(`I got an error! ${error}`)}})(),console.log("This user has been written to the database")}catch(e){console.log(`There was an error: ${e}`),(0,h.showLoginError)(e)}})),h.btnLogout.addEventListener("click",(()=>(0,u.signOut)(v))),(async()=>{(0,u.onAuthStateChanged)(v,(e=>{e?((0,h.showApp)(),(0,h.showLoginState)(e),(0,h.hideLoginError)()):((0,h.showLoginForm)(),lblAuthState.innerHTML="You're not logged in.")}))})(),(0,a.checkTheme)();document.getElementById("theme-switch-button").addEventListener("click",a.changeThemeOnClick);w.addEventListener("click",(function(){(async()=>{let e=[];const t=v.currentUser;if(null!==t){console.log("Generating watched list");const o=(0,p.collection)(f,"users",t.uid,"watched");return(async()=>{try{return(await(0,p.getDocs)(o)).forEach((t=>{e.push(t.id)})),e}catch{console.log(`I got an error! ${error}`)}})()}console.log("You're not logged in.")})().then((e=>k(e))).then((e=>{console.log("!!!!movies!!!!",e),l.movieData.movies=e,b.innerHTML=(0,c.renderMovies)({movies:e}),b.addEventListener("click",d.onCardClick)})).catch((e=>console.error(e.message)))})),y.addEventListener("click",(function(){(async()=>{const e=v.currentUser;if(!e)return void console.error("You're not logged in.");const t=(0,p.collection)(f,"users",e.uid,"queue");try{const e=[];return(await(0,p.getDocs)(t)).forEach((t=>{e.push(t.id)})),e}catch{console.error(`I got an error! ${error}`)}})().then((e=>k(e))).then((e=>{console.log("!!!!movies!!!!",e),l.movieData.movies=e,b.innerHTML=(0,c.renderMovies)({movies:e}),b.addEventListener("click",d.onCardClick)})).catch((e=>console.error(e.message)))}));
//# sourceMappingURL=library.4fbc7eb1.js.map
