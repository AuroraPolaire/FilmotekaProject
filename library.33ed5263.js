var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},t={},n=e.parcelRequire78b5;null==n&&((n=function(e){if(e in o)return o[e].exports;if(e in t){var n=t[e];delete t[e];var r={id:e,exports:{}};return o[e]=r,n.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,o){t[e]=o},e.parcelRequire78b5=n);var r=n("jfYt8"),i=n("krGWQ");function s(e){i.refs.slickSlider.innerHTML=e.map((({original_title:e,poster_path:o,vote_average:t,movie_id:n,name:i})=>`<div class="slider__item"><img class="slider-image" src=${r.IMG_URL}${o} alt="${e}${i}" data-id="${n}" onerror="this.onerror=null;this.src="https://i.postimg.cc/6pzyh7Wc/pngwing-com.png";" /><span class="trending-raiting">${t.toFixed(1)}</span></div>`)).join(""),$(".slider").slick({arrows:!1,centerMode:!0,lazyLoad:"progressive",autoplay:!0,autoplaySpeed:1e3,infinite:!0,speed:1e3,adaptiveHeigt:!0,cssEase:"ease",slidesToShow:8,responsive:[{breakpoint:1100,settings:{slidesToShow:6,infinite:!0}},{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:480,settings:{slidesToShow:2}}]})}fetch("https://api.themoviedb.org/3/trending/all/day?api_key=2b316c342fe13f9049052886494c29f1").then((e=>e.json())).then((({results:e})=>e)).then(s).catch((e=>console.log(e))),n("ctnTC"),n("688Bf"),n("9hR6i"),n("j8htv"),n("1VOaQ"),n("4bOKh");r=n("jfYt8");var a=n("ldhCG"),c=n("e96jb"),l=n("7Sa78"),d=n("cWqtQ"),g=n("gKkQl"),u=n("eyjy7"),h=n("ftYLF");const p=(0,g.initializeApp)({apiKey:"AIzaSyAQNEF1EZQq4hRQq21AEqmnTA4ysock-bY",authDomain:"filmoteka-77997.firebaseapp.com",projectId:"filmoteka-77997",storageBucket:"filmoteka-77997.appspot.com",messagingSenderId:"555325927364",appId:"1:555325927364:web:5f447ca8d4265db75c3e91",measurementId:"G-LZ05WYL8RJ"}),m=(0,u.getAuth)(p),v=(0,h.getFirestore)(p),f=document.querySelector(".library__watched-btn"),w=document.querySelector(".library__queue-btn"),y=document.querySelector(".trending-movies__list");async function b(e){const o=e.map((async e=>await r.themoviedbApi.getMovieById(e)));return await Promise.all(o)}d.btnLogin.addEventListener("click",(async()=>{const e=txtEmail.value,o=txtPassword.value;try{await(0,u.signInWithEmailAndPassword)(m,e,o)}catch(e){console.log(`There was an error: ${e}`),(0,d.showLoginError)(e)}})),d.btnSignup.addEventListener("click",(async()=>{const e=txtEmail.value,o=txtPassword.value;try{const t=await(0,u.createUserWithEmailAndPassword)(m,e,o),n=(0,h.doc)(v,"users",t.user.uid);(async()=>{try{await(0,h.setDoc)(n,{email:e}),console.log("This user has been written to the Firestore")}catch{console.log(`I got an error! ${error}`)}})(),console.log("This user has been written to the database")}catch(e){console.log(`There was an error: ${e}`),(0,d.showLoginError)(e)}})),d.btnLogout.addEventListener("click",(()=>(0,u.signOut)(m))),(async()=>{(0,u.onAuthStateChanged)(m,(e=>{e?((0,d.showApp)(),(0,d.showLoginState)(e),(0,d.hideLoginError)()):((0,d.showLoginForm)(),lblAuthState.innerHTML="You're not logged in.")}))})();f.addEventListener("click",(function(){(async()=>{let e=[];const o=m.currentUser;if(null!==o){console.log("Generating watched list");const t=(0,h.collection)(v,"users",o.uid,"watched");return(async()=>{try{return(await(0,h.getDocs)(t)).forEach((o=>{e.push(o.id)})),e}catch{console.log(`I got an error! ${error}`)}})()}console.log("You're not logged in.")})().then((e=>b(e))).then((e=>{console.log("!!!!movies!!!!",e),c.movieData.movies=e,y.innerHTML=(0,a.renderMovies)({movies:e}),y.addEventListener("click",l.onCardClick)})).catch((e=>console.error(e.message)))})),w.addEventListener("click",(function(){(async()=>{const e=m.currentUser;if(!e)return void console.error("You're not logged in.");const o=(0,h.collection)(v,"users",e.uid,"queue");try{const e=[];return(await(0,h.getDocs)(o)).forEach((o=>{e.push(o.id)})),e}catch{console.error(`I got an error! ${error}`)}})().then((e=>b(e))).then((e=>{console.log("!!!!movies!!!!",e),c.movieData.movies=e,y.innerHTML=(0,a.renderMovies)({movies:e}),y.addEventListener("click",l.onCardClick)})).catch((e=>console.error(e.message)))}));
//# sourceMappingURL=library.33ed5263.js.map
