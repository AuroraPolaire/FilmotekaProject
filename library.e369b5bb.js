var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},t={},n=e.parcelRequire78b5;null==n&&((n=function(e){if(e in o)return o[e].exports;if(e in t){var n=t[e];delete t[e];var r={id:e,exports:{}};return o[e]=r,n.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,o){t[e]=o},e.parcelRequire78b5=n);var r=n("jfYt8"),a=n("krGWQ");function i(e){a.refs.slickSlider.innerHTML=e.map((({original_title:e,poster_path:o,vote_average:t,movie_id:n,name:a})=>`<div class="slider__item"><img class="slider-image" src=${r.IMG_URL}${o} alt="${e}${a}" data-id="${n}" onerror="this.onerror=null;this.src="https://i.postimg.cc/6pzyh7Wc/pngwing-com.png";" /><span class="trending-raiting">${t.toFixed(1)}</span></div>`)).join(""),$(".slider").slick({arrows:!1,centerMode:!0,lazyLoad:"progressive",autoplay:!0,autoplaySpeed:1e3,slidesToShow:6,infinite:!0,speed:1e3,adaptiveHeigt:!0,cssEase:"ease"})}fetch("https://api.themoviedb.org/3/trending/all/day?api_key=2b316c342fe13f9049052886494c29f1").then((e=>e.json())).then((({results:e})=>e)).then(i).catch((e=>console.log(e)));var s=n("cWqtQ"),l=n("gKkQl"),c=n("eyjy7"),d=n("ftYLF");console.log("Firebase!");const g=(0,l.initializeApp)({apiKey:"AIzaSyAQNEF1EZQq4hRQq21AEqmnTA4ysock-bY",authDomain:"filmoteka-77997.firebaseapp.com",projectId:"filmoteka-77997",storageBucket:"filmoteka-77997.appspot.com",messagingSenderId:"555325927364",appId:"1:555325927364:web:5f447ca8d4265db75c3e91",measurementId:"G-LZ05WYL8RJ"}),u=(0,c.getAuth)(g),h=(0,d.getFirestore)(g);s.btnLogin.addEventListener("click",(async()=>{const e=txtEmail.value,o=txtPassword.value;try{await(0,c.signInWithEmailAndPassword)(u,e,o)}catch(e){console.log(`There was an error: ${e}`),(0,s.showLoginError)(e)}})),s.btnSignup.addEventListener("click",(async()=>{const e=txtEmail.value,o=txtPassword.value;try{const t=await(0,c.createUserWithEmailAndPassword)(u,e,o),n=(0,d.doc)(h,"users",t.user.uid);(async()=>{try{await(0,d.setDoc)(n,{email:e}),console.log("This user has been written to the Firestore")}catch{console.log(`I got an error! ${error}`)}})(),console.log("This user has been written to the database")}catch(e){console.log(`There was an error: ${e}`),(0,s.showLoginError)(e)}})),s.btnLogout.addEventListener("click",(async()=>{await(0,c.signOut)(u)})),(async()=>{(0,c.onAuthStateChanged)(u,(e=>{e?((0,s.showApp)(),(0,s.showLoginState)(e),(0,s.hideLoginError)()):((0,s.showLoginForm)(),lblAuthState.innerHTML="You're not logged in.")}))})();const p=document.querySelector(".library__watched-btn"),w=document.querySelector(".library__queue-btn");p.addEventListener("click",(()=>{(async()=>{let e=[];(0,c.onAuthStateChanged)(u,(o=>{if(o){console.log("Generating watched list");const t=(0,d.collection)(h,"users",o.uid,"watched");(async()=>{try{(await(0,d.getDocs)(t)).forEach((o=>{console.log(o.id),e.push(Number(o.id))})),console.log(e)}catch{console.log(`I got an error! ${error}`)}})()}else(0,s.showLoginForm)(),lblAuthState.innerHTML="You're not logged in."}))})()})),w.addEventListener("click",(()=>{(async()=>{let e=[];(0,c.onAuthStateChanged)(u,(o=>{if(o){console.log("Generating queue list");const t=(0,d.collection)(h,"users",o.uid,"queue");(async()=>{try{(await(0,d.getDocs)(t)).forEach((o=>{console.log(o.id),e.push(o.id)})),console.log(e)}catch{console.log(`I got an error! ${error}`)}})()}else(0,s.showLoginForm)(),lblAuthState.innerHTML="You're not logged in."}))})()}));
//# sourceMappingURL=library.e369b5bb.js.map
