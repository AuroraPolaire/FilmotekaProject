{"mappings":"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","sources":["src/library.js","src/js/slider.js"],"sourcesContent":["import './js/slider';\nimport '../node_modules/@fortawesome/fontawesome-free/js/solid.min';\nimport '../node_modules/@fortawesome/fontawesome-free/js/brands.min';\nimport '../node_modules/@fortawesome/fontawesome-free/js/fontawesome.min';\nimport './js/sliderGlide';\nimport './js/teamModal';\nimport './js/renderTeamModal';\nimport { checkTheme, changeThemeOnClick } from './js/theme';\nimport { themoviedbApi } from './js/themoviedb-service';\nimport { renderMovies } from './js/renderMovies';\nimport { movieData } from './js/movieClass';\nimport { onCardClick } from './js/onCardClick';\n\n// <<<<<<<<<< FIREBASE >>>>>>>>>>\n\nimport {\n  hideLoginError,\n  showLoginState,\n  showLoginForm,\n  showApp,\n  showLoginError,\n  btnLogin,\n  btnSignup,\n  btnLogout,\n} from './js/auth-ui';\n\nimport { initializeApp } from 'firebase/app';\nimport {\n  getAuth,\n  onAuthStateChanged,\n  signOut,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n} from 'firebase/auth';\nimport {\n  getFirestore,\n  addDoc,\n  collection,\n  setDoc,\n  doc,\n  updateDoc,\n  getDocs,\n} from 'firebase/firestore';\n\nconst firebaseApp = initializeApp({\n  apiKey: 'AIzaSyAQNEF1EZQq4hRQq21AEqmnTA4ysock-bY',\n  authDomain: 'filmoteka-77997.firebaseapp.com',\n  projectId: 'filmoteka-77997',\n  storageBucket: 'filmoteka-77997.appspot.com',\n  messagingSenderId: '555325927364',\n  appId: '1:555325927364:web:5f447ca8d4265db75c3e91',\n  measurementId: 'G-LZ05WYL8RJ',\n});\n\nconst auth = getAuth(firebaseApp);\nconst firestore = getFirestore(firebaseApp);\n\nconst watchedBtn = document.querySelector('.library__watched-btn');\nconst queueBtn = document.querySelector('.library__queue-btn');\nconst libraryList = document.querySelector('.trending-movies__list');\n\nasync function fetchMovies(ids) {\n  const arrayOfPromises = ids.map(async id => {\n    return await themoviedbApi.getMovieById(id);\n  });\n\n  const movies = await Promise.all(arrayOfPromises);\n  return movies;\n}\n\n// <<<<<<<<<< FIREBASE AUTHENTICATION >>>>>>>>>>\n\n// Login using email/password\nconst loginEmailPassword = async () => {\n  const loginEmail = txtEmail.value;\n  const loginPassword = txtPassword.value;\n\n  try {\n    await signInWithEmailAndPassword(auth, loginEmail, loginPassword);\n  } catch (error) {\n    console.log(`There was an error: ${error}`);\n    showLoginError(error);\n  }\n};\n\n// Create new account using email/password and link it with FireSTORE\nconst createAccount = async () => {\n  const email = txtEmail.value;\n  const password = txtPassword.value;\n\n  try {\n    const newUser = await createUserWithEmailAndPassword(auth, email, password);\n\n    const userRef = doc(firestore, 'users', newUser.user.uid);\n    const dbAddUser = async () => {\n      try {\n        await setDoc(userRef, { email: email });\n        console.log('This user has been written to the Firestore');\n      } catch {\n        console.log(`I got an error! ${error}`);\n      }\n    };\n\n    dbAddUser();\n\n    console.log('This user has been written to the database');\n  } catch (error) {\n    console.log(`There was an error: ${error}`);\n    showLoginError(error);\n  }\n};\n\n// Monitor auth state\nconst monitorAuthState = async () => {\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      //   console.log(user);\n      showApp();\n      showLoginState(user);\n\n      hideLoginError();\n      // hideLinkError();\n    } else {\n      showLoginForm();\n      lblAuthState.innerHTML = `You're not logged in.`;\n    }\n  });\n};\n\nbtnLogin.addEventListener('click', loginEmailPassword);\nbtnSignup.addEventListener('click', createAccount);\nbtnLogout.addEventListener('click', () => signOut(auth));\n\nmonitorAuthState();\ncheckTheme();\nconst themeSwitchButton = document.getElementById('theme-switch-button');\nthemeSwitchButton.addEventListener('click', changeThemeOnClick);\n\nconst watchedListFromDb = async () => {\n  let arr = [];\n\n  const user = auth.currentUser;\n  if (user !== null) {\n    console.log('Generating watched list');\n\n    const docRef = collection(firestore, 'users', user.uid, 'watched');\n\n    const getMovies = async () => {\n      try {\n        const moviesIdFromDb = await getDocs(docRef);\n        moviesIdFromDb.forEach(doc => {\n          arr.push(doc.id);\n        });\n        return arr;\n      } catch {\n        console.log(`I got an error! ${error}`);\n      }\n    };\n    return getMovies();\n  } else {\n    console.log(`You're not logged in.`);\n  }\n};\n\nconst queueListFromDb = async () => {\n  const user = auth.currentUser;\n  if (!user) {\n    console.error(`You're not logged in.`);\n    return;\n  }\n\n  const docRef = collection(firestore, 'users', user.uid, 'queue');\n  try {\n    const arr = [];\n    const moviesIdFromDb = await getDocs(docRef);\n    moviesIdFromDb.forEach(doc => {\n      arr.push(doc.id);\n    });\n    return arr;\n  } catch {\n    console.error(`I got an error! ${error}`);\n  }\n};\n\nfunction onWatchedBtnClick() {\n  watchedListFromDb()\n    .then(ids => fetchMovies(ids))\n    .then(movies => {\n      console.log('!!!!movies!!!!', movies);\n      movieData.movies = movies;\n      libraryList.innerHTML = renderMovies({ movies });\n      libraryList.addEventListener('click', onCardClick);\n    })\n    .catch(error => console.error(error.message));\n}\n\nfunction onQueueBtnClick() {\n  queueListFromDb()\n    .then(ids => fetchMovies(ids))\n    .then(movies => {\n      console.log('!!!!movies!!!!', movies);\n      movieData.movies = movies;\n      libraryList.innerHTML = renderMovies({ movies });\n      libraryList.addEventListener('click', onCardClick);\n    })\n    .catch(error => console.error(error.message));\n}\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\nqueueBtn.addEventListener('click', onQueueBtnClick);\n","import {\n  URL,\n  IMG_URL,\n  API_KEY,\n  poster_path,\n  movie_id,\n  genre_ids,\n  name,\n} from './themoviedb-service';\nimport { refs } from './refs';\n\nrenderTrendingFilms();\n\nfunction initializeSlider() {\n  $('.slider').slick({\n    arrows: false,\n    centerMode: true,\n    lazyLoad: 'progressive',\n    autoplay: true,\n    autoplaySpeed: 1000,\n    infinite: true,\n    speed: 1000,\n    adaptiveHeigt: true,\n    cssEase: 'ease',\n    slidesToShow: 8,\n    responsive: [\n      {\n        breakpoint: 1100,\n        settings: {\n          slidesToShow: 6,\n          infinite: true,\n        }\n      },\n      {\n        breakpoint: 768,\n        settings: {\n          slidesToShow: 3,\n        }\n      },\n      {\n        breakpoint: 480,\n        settings: {\n          slidesToShow: 2,\n        }\n      }]\n    \n  });\n}\n\nfunction renderTrendingFilms() {\n  const trendingUrl = `https://api.themoviedb.org/3/trending/all/day?api_key=2b316c342fe13f9049052886494c29f1`;\n  return fetch(trendingUrl)\n    .then(response => response.json())\n    .then(({ results }) => {\n      return results;\n    })\n    .then(renderSliderFilms)\n    .catch(error => console.log(error));\n}\n\nfunction filmCardSlider(films) {\n  return films\n    .map(({ original_title, poster_path, vote_average, movie_id, name }) => {\n      return `<div class=\"slider__item\"><img class=\"slider-image\" src=${IMG_URL}${poster_path} alt=\"${original_title}${name}\" data-id=\"${movie_id}\" onerror=\"this.onerror=null;this.src=\"https://i.postimg.cc/6pzyh7Wc/pngwing-com.png\";\" /><span class=\"trending-raiting\">${vote_average.toFixed(1)}</span></div>`;\n    })\n    .join('');\n}\n\nfunction renderSliderFilms(articles) {\n  refs.slickSlider.innerHTML = filmCardSlider(articles);\n  initializeSlider();\n}"],"names":["$bpxeT","parcelRequire","$fKAmx","$67eec5fac676ecc7$var$renderSliderFilms","articles","$4Nugj","refs","slickSlider","innerHTML","map","param","original_title","poster_path1","poster_path","vote_average","movie_id1","movie_id","name1","name","concat","IMG_URL","toFixed","join","$","slick","arrows","centerMode","lazyLoad","autoplay","autoplaySpeed","infinite","speed","adaptiveHeigt","cssEase","slidesToShow","responsive","breakpoint","settings","fetch","then","response","json","results","catch","error","console","log","$cecbdd76f2d3d4bd$var$firebaseApp","$fkNhc","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","$cecbdd76f2d3d4bd$var$auth","$gQOBw","getAuth","$cecbdd76f2d3d4bd$var$firestore","$6m2hf","getFirestore","$cecbdd76f2d3d4bd$var$watchedBtn","document","querySelector","$cecbdd76f2d3d4bd$var$queueBtn","$cecbdd76f2d3d4bd$var$libraryList","$cecbdd76f2d3d4bd$var$fetchMovies","ids","$cecbdd76f2d3d4bd$var$_fetchMovies","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee1","arrayOfPromises","movies","_callee","id","themoviedbApi","getMovieById","Promise","all","_ctx1","sent","$cecbdd76f2d3d4bd$var$loginEmailPassword","loginEmail","loginPassword","txtEmail","value","txtPassword","signInWithEmailAndPassword","_ctx","t0","$jREuN","showLoginError","$cecbdd76f2d3d4bd$var$createAccount","_callee2","email","password","newUser","userRef","dbAddUser","createUserWithEmailAndPassword","_ctx2","doc","user","uid","setDoc","$cecbdd76f2d3d4bd$var$monitorAuthState","onAuthStateChanged","showApp","showLoginState","hideLoginError","showLoginForm","lblAuthState","btnLogin","addEventListener","btnSignup","btnLogout","signOut","$9VC5X","checkTheme","getElementById","changeThemeOnClick","$cecbdd76f2d3d4bd$var$watchedListFromDb","_callee3","arr","docRef","getMovies","currentUser","collection","getDocs","forEach","doc1","push","$cecbdd76f2d3d4bd$var$queueListFromDb","doc2","$3sNoF","movieData","$A7ncr","renderMovies","$iLqhe","onCardClick","message"],"version":3,"file":"library.a39417e4.js.map"}