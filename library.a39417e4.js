!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},o=n.parcelRequire78b5;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,n){r[e]=n},n.parcelRequire78b5=o);var a=o("bpxeT"),i=o("2TvXO"),c=o("fKAmx"),s=o("4Nugj");function u(e){s.refs.slickSlider.innerHTML=e.map((function(e){var n=e.original_title,t=e.poster_path,r=e.vote_average,o=e.movie_id,a=e.name;return'<div class="slider__item"><img class="slider-image" src='.concat(c.IMG_URL).concat(t,' alt="').concat(n).concat(a,'" data-id="').concat(o,'" onerror="this.onerror=null;this.src="https://i.postimg.cc/6pzyh7Wc/pngwing-com.png";" /><span class="trending-raiting">').concat(r.toFixed(1),"</span></div>")})).join(""),$(".slider").slick({arrows:!1,centerMode:!0,lazyLoad:"progressive",autoplay:!0,autoplaySpeed:1e3,infinite:!0,speed:1e3,adaptiveHeigt:!0,cssEase:"ease",slidesToShow:8,responsive:[{breakpoint:1100,settings:{slidesToShow:6,infinite:!0}},{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:480,settings:{slidesToShow:2}}]})}fetch("https://api.themoviedb.org/3/trending/all/day?api_key=2b316c342fe13f9049052886494c29f1").then((function(e){return e.json()})).then((function(e){return e.results})).then(u).catch((function(e){return console.log(e)})),o("9dHD0"),o("awpQC"),o("6HTNl"),o("9K2dW"),o("dsadE"),o("f6Vol");var l=o("9VC5X"),p=(c=o("fKAmx"),o("A7ncr")),d=o("3sNoF"),f=o("iLqhe"),h=o("jREuN"),v=o("fkNhc"),g=o("gQOBw"),m=o("6m2hf"),w=(0,v.initializeApp)({apiKey:"AIzaSyAQNEF1EZQq4hRQq21AEqmnTA4ysock-bY",authDomain:"filmoteka-77997.firebaseapp.com",projectId:"filmoteka-77997",storageBucket:"filmoteka-77997.appspot.com",messagingSenderId:"555325927364",appId:"1:555325927364:web:5f447ca8d4265db75c3e91",measurementId:"G-LZ05WYL8RJ"}),b=(0,g.getAuth)(w),k=(0,m.getFirestore)(w),x=document.querySelector(".library__watched-btn"),y=document.querySelector(".library__queue-btn"),E=document.querySelector(".trending-movies__list");function L(e){return T.apply(this,arguments)}function T(){return T=e(a)(e(i).mark((function n(t){var r,o;return e(i).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.map(function(){var n=e(a)(e(i).mark((function n(t){return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.themoviedbApi.getMovieById(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),n.next=3,Promise.all(r);case 3:return o=n.sent,n.abrupt("return",o);case 5:case"end":return n.stop()}}),n)}))),T.apply(this,arguments)}var _,A,S=(_=e(a)(e(i).mark((function n(){var t,r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=txtEmail.value,r=txtPassword.value,e.prev=2,e.next=5,(0,g.signInWithEmailAndPassword)(b,t,r);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("There was an error: ".concat(e.t0)),(0,h.showLoginError)(e.t0);case 11:case"end":return e.stop()}}),n,null,[[2,7]])}))),function(){return _.apply(this,arguments)}),I=(A=e(a)(e(i).mark((function n(){var t,r,o,c,s;return e(i).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=txtEmail.value,r=txtPassword.value,n.prev=2,n.next=5,(0,g.createUserWithEmailAndPassword)(b,t,r);case 5:o=n.sent,c=(0,m.doc)(k,"users",o.user.uid),s=function(){var n=e(a)(e(i).mark((function n(){return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.setDoc)(c,{email:t});case 3:console.log("This user has been written to the Firestore"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("I got an error! ".concat(error));case 9:case"end":return e.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}(),s(),console.log("This user has been written to the database"),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(2),console.log("There was an error: ".concat(n.t0)),(0,h.showLoginError)(n.t0);case 16:case"end":return n.stop()}}),n,null,[[2,12]])}))),function(){return A.apply(this,arguments)}),q=function(){var n=e(a)(e(i).mark((function n(){return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,g.onAuthStateChanged)(b,(function(e){e?((0,h.showApp)(),(0,h.showLoginState)(e),(0,h.hideLoginError)()):((0,h.showLoginForm)(),lblAuthState.innerHTML="You're not logged in.")}));case 1:case"end":return e.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();h.btnLogin.addEventListener("click",S),h.btnSignup.addEventListener("click",I),h.btnLogout.addEventListener("click",(function(){return(0,g.signOut)(b)})),q(),(0,l.checkTheme)(),document.getElementById("theme-switch-button").addEventListener("click",l.changeThemeOnClick);var M,C=(M=e(a)(e(i).mark((function n(){var t,r,o,c;return e(i).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=[],null===(r=b.currentUser)){n.next=9;break}return console.log("Generating watched list"),o=(0,m.collection)(k,"users",r.uid,"watched"),c=function(){var n=e(a)(e(i).mark((function n(){return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.getDocs)(o);case 3:return e.sent.forEach((function(e){t.push(e.id)})),e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),console.log("I got an error! ".concat(error));case 11:case"end":return e.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}(),n.abrupt("return",c());case 9:console.log("You're not logged in.");case 10:case"end":return n.stop()}}),n)}))),function(){return M.apply(this,arguments)}),D=function(){var n=e(a)(e(i).mark((function n(){var t,r,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.currentUser){e.next=4;break}return console.error("You're not logged in."),e.abrupt("return");case 4:return r=(0,m.collection)(k,"users",t.uid,"queue"),e.prev=5,o=[],e.next=9,(0,m.getDocs)(r);case 9:return e.sent.forEach((function(e){o.push(e.id)})),e.abrupt("return",o);case 14:e.prev=14,e.t0=e.catch(5),console.error("I got an error! ".concat(error));case 17:case"end":return e.stop()}}),n,null,[[5,14]])})));return function(){return n.apply(this,arguments)}}();x.addEventListener("click",(function(){C().then((function(e){return L(e)})).then((function(e){console.log("!!!!movies!!!!",e),d.movieData.movies=e,E.innerHTML=(0,p.renderMovies)({movies:e}),E.addEventListener("click",f.onCardClick)})).catch((function(e){return console.error(e.message)}))})),y.addEventListener("click",(function(){D().then((function(e){return L(e)})).then((function(e){console.log("!!!!movies!!!!",e),d.movieData.movies=e,E.innerHTML=(0,p.renderMovies)({movies:e}),E.addEventListener("click",f.onCardClick)})).catch((function(e){return console.error(e.message)}))}))}();
//# sourceMappingURL=library.a39417e4.js.map
