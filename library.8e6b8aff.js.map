{"mappings":"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","sources":["src/library.js","src/js/slider.js"],"sourcesContent":["import './js/slider';\n\n// <<<<<<<<<< FIREBASE >>>>>>>>>>\n\nconsole.log('Firebase!');\n\nimport {\n  hideLoginError,\n  showLoginState,\n  showLoginForm,\n  showApp,\n  showLoginError,\n  btnLogin,\n  btnSignup,\n  btnLogout,\n} from './js/auth-ui';\n\nimport { initializeApp } from 'firebase/app';\nimport {\n  getAuth,\n  onAuthStateChanged,\n  signOut,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n} from 'firebase/auth';\nimport {\n  getFirestore,\n  addDoc,\n  collection,\n  setDoc,\n  doc,\n  updateDoc,\n  getDocs,\n} from 'firebase/firestore';\n\nconst firebaseApp = initializeApp({\n  apiKey: 'AIzaSyAQNEF1EZQq4hRQq21AEqmnTA4ysock-bY',\n  authDomain: 'filmoteka-77997.firebaseapp.com',\n  projectId: 'filmoteka-77997',\n  storageBucket: 'filmoteka-77997.appspot.com',\n  messagingSenderId: '555325927364',\n  appId: '1:555325927364:web:5f447ca8d4265db75c3e91',\n  measurementId: 'G-LZ05WYL8RJ',\n});\n\nconst auth = getAuth(firebaseApp);\nconst firestore = getFirestore(firebaseApp);\n\n// <<<<<<<<<< FIREBASE AUTHENTICATION >>>>>>>>>>\n\n// Login using email/password\nconst loginEmailPassword = async () => {\n  const loginEmail = txtEmail.value;\n  const loginPassword = txtPassword.value;\n\n  try {\n    await signInWithEmailAndPassword(auth, loginEmail, loginPassword);\n  } catch (error) {\n    console.log(`There was an error: ${error}`);\n    showLoginError(error);\n  }\n};\n\n// Create new account using email/password and link it with FireSTORE\nconst createAccount = async () => {\n  const email = txtEmail.value;\n  const password = txtPassword.value;\n\n  try {\n    const newUser = await createUserWithEmailAndPassword(auth, email, password);\n\n    const userRef = doc(firestore, 'users', newUser.user.uid);\n    const dbAddUser = async () => {\n      try {\n        await setDoc(userRef, { email: email });\n        console.log('This user has been written to the Firestore');\n      } catch {\n        console.log(`I got an error! ${error}`);\n      }\n    };\n\n    dbAddUser();\n\n    console.log('This user has been written to the database');\n  } catch (error) {\n    console.log(`There was an error: ${error}`);\n    showLoginError(error);\n  }\n};\n\n// Monitor auth state\nconst monitorAuthState = async () => {\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      //   console.log(user);\n      showApp();\n      showLoginState(user);\n\n      hideLoginError();\n      // hideLinkError();\n    } else {\n      showLoginForm();\n      lblAuthState.innerHTML = `You're not logged in.`;\n    }\n  });\n};\n\n// Log out\nconst logout = async () => {\n  await signOut(auth);\n};\n\nbtnLogin.addEventListener('click', loginEmailPassword);\nbtnSignup.addEventListener('click', createAccount);\nbtnLogout.addEventListener('click', logout);\n\nmonitorAuthState();\n\nconst watchedListFromDb = async () => {\n  let arr = [];\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      console.log('Generating watched list');\n\n      const docRef = collection(firestore, 'users', user.uid, 'watched');\n\n      const getMovies = async () => {\n        try {\n          const moviesIdFromDb = await getDocs(docRef);\n          moviesIdFromDb.forEach(doc => {\n            console.log(doc.id);\n            arr.push(Number(doc.id));\n          });\n\n          console.log(arr);\n          return arr;\n        } catch {\n          console.log(`I got an error! ${error}`);\n        }\n      };\n\n      getMovies();\n    } else {\n      showLoginForm();\n      lblAuthState.innerHTML = `You're not logged in.`;\n    }\n  });\n};\n\nconst queueListFromDb = async () => {\n  let arr = [];\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      console.log('Generating queue list');\n\n      const docRef = collection(firestore, 'users', user.uid, 'queue');\n\n      const getMovies = async () => {\n        try {\n          const moviesIdFromDb = await getDocs(docRef);\n          moviesIdFromDb.forEach(doc => {\n            console.log(doc.id);\n            arr.push(doc.id);\n          });\n\n          console.log(arr);\n          return arr;\n        } catch {\n          console.log(`I got an error! ${error}`);\n        }\n      };\n\n      getMovies();\n    } else {\n      showLoginForm();\n      lblAuthState.innerHTML = `You're not logged in.`;\n    }\n  });\n};\n\nconst watchedBtn = document.querySelector('.library__watched-btn');\nconst queueBtn = document.querySelector('.library__queue-btn');\n\nconst onWatchedBtnClick = () => {\n  watchedListFromDb();\n};\n\nconst onQueueBtnClick = () => {\n  queueListFromDb();\n};\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\nqueueBtn.addEventListener('click', onQueueBtnClick);\n","import {\n  URL,\n  IMG_URL,\n  API_KEY,\n  poster_path,\n  movie_id,\n  genre_ids,\n  name,\n} from './themoviedb-service';\nimport { refs } from './refs';\n\nrenderTrendingFilms();\n\nfunction initializeSlider() {\n  $('.slider').slick({\n    arrows: false,\n    centerMode: true,\n    lazyLoad: 'progressive',\n    autoplay: true,\n    autoplaySpeed: 1000,\n    slidesToShow: 6,\n    infinite: true,\n    speed: 1000,\n    adaptiveHeigt: true,\n    cssEase: 'ease',\n  });\n}\n\nfunction renderTrendingFilms() {\n  const trendingUrl = `https://api.themoviedb.org/3/trending/all/day?api_key=2b316c342fe13f9049052886494c29f1`;\n  return fetch(trendingUrl)\n    .then(response => response.json())\n    .then(({ results }) => {\n      return results;\n    })\n    .then(renderSliderFilms)\n    .catch(error => console.log(error));\n}\n\nfunction filmCardSlider(films) {\n  return films\n    .map(({ original_title, poster_path, vote_average, movie_id, name }) => {\n      return `<div class=\"slider__item\"><img class=\"slider-image\" src=${IMG_URL}${poster_path} alt=\"${original_title}${name}\" data-id=\"${movie_id}\" onerror=\"this.onerror=null;this.src=\"https://i.postimg.cc/6pzyh7Wc/pngwing-com.png\";\" /><span class=\"trending-raiting\">${vote_average.toFixed(1)}</span></div>`;\n    })\n    .join('');\n}\n\nfunction renderSliderFilms(articles) {\n  refs.slickSlider.innerHTML = filmCardSlider(articles);\n  initializeSlider();\n}"],"names":["$bpxeT","parcelRequire","$fKAmx","$67eec5fac676ecc7$var$renderSliderFilms","articles","$4Nugj","refs","slickSlider","innerHTML","map","param","original_title","poster_path1","poster_path","vote_average","movie_id1","movie_id","name1","name","concat","IMG_URL","toFixed","join","$","slick","arrows","centerMode","lazyLoad","autoplay","autoplaySpeed","slidesToShow","infinite","speed","adaptiveHeigt","cssEase","fetch","then","response","json","results","catch","error","console","log","$cecbdd76f2d3d4bd$var$firebaseApp","$fkNhc","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","$cecbdd76f2d3d4bd$var$auth","$gQOBw","getAuth","$cecbdd76f2d3d4bd$var$firestore","$6m2hf","getFirestore","$cecbdd76f2d3d4bd$var$loginEmailPassword","$parcel$interopDefault","$2TvXO","mark","_callee","loginEmail","loginPassword","txtEmail","value","txtPassword","signInWithEmailAndPassword","_ctx","t0","$jREuN","showLoginError","$cecbdd76f2d3d4bd$var$createAccount","_callee1","email","password","newUser","userRef","dbAddUser","createUserWithEmailAndPassword","_ctx1","sent","doc","user","uid","setDoc","$cecbdd76f2d3d4bd$var$monitorAuthState","onAuthStateChanged","showApp","showLoginState","hideLoginError","showLoginForm","lblAuthState","$cecbdd76f2d3d4bd$var$logout","signOut","btnLogin","addEventListener","btnSignup","btnLogout","$cecbdd76f2d3d4bd$var$watchedListFromDb","_callee2","arr","docRef","collection","getMovies","getDocs","forEach","doc1","id","push","Number","$cecbdd76f2d3d4bd$var$queueListFromDb","_callee3","doc2","$cecbdd76f2d3d4bd$var$watchedBtn","document","querySelector","$cecbdd76f2d3d4bd$var$queueBtn"],"version":3,"file":"library.8e6b8aff.js.map"}