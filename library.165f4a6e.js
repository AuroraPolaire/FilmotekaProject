var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequire78b5;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,o.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequire78b5=o);var r=o("jfYt8"),a=o("krGWQ");function i(e){a.refs.slickSlider.innerHTML=e.map((({original_title:e,poster_path:t,vote_average:n,movie_id:o,name:a})=>`<div class="slider__item"><img class="slider-image" src=${r.IMG_URL}${t} alt="${e}${a}" data-id="${o}" onerror="this.onerror=null;this.src="https://i.postimg.cc/6pzyh7Wc/pngwing-com.png";" /><span class="trending-raiting">${n.toFixed(1)}</span></div>`)).join(""),$(".slider").slick({arrows:!1,centerMode:!0,lazyLoad:"progressive",autoplay:!0,autoplaySpeed:1e3,infinite:!0,speed:1e3,adaptiveHeigt:!0,cssEase:"ease",slidesToShow:8,responsive:[{breakpoint:1100,settings:{slidesToShow:6,infinite:!0}},{breakpoint:768,settings:{slidesToShow:4}},{breakpoint:480,settings:{slidesToShow:2}}]})}fetch("https://api.themoviedb.org/3/trending/all/day?api_key=2b316c342fe13f9049052886494c29f1").then((e=>e.json())).then((({results:e})=>e)).then(i).catch((e=>console.log(e))),o("ctnTC"),o("688Bf"),o("9hR6i"),o("j8htv"),o("1VOaQ"),o("4bOKh");var s=o("cWqtQ"),c=o("gKkQl"),l=o("eyjy7"),d=o("ftYLF");r=o("jfYt8");o("ldhCG"),o("e96jb"),console.log("Firebase!");const g=(0,c.initializeApp)({apiKey:"AIzaSyAQNEF1EZQq4hRQq21AEqmnTA4ysock-bY",authDomain:"filmoteka-77997.firebaseapp.com",projectId:"filmoteka-77997",storageBucket:"filmoteka-77997.appspot.com",messagingSenderId:"555325927364",appId:"1:555325927364:web:5f447ca8d4265db75c3e91",measurementId:"G-LZ05WYL8RJ"}),p=(0,l.getAuth)(g),u=(0,d.getFirestore)(g),h=document.querySelector(".library__watched-btn"),v=document.querySelector(".library__queue-btn"),m=document.querySelector(".trending-movies__list");async function w(e){const t=e.map((async e=>await r.themoviedbApi.getMovieById(e)));return await Promise.all(t)}function y(e){console.log(e);const t=e.map((({title:e,poster_path:t,release_date:n,genre_ids:o,gender:r,name:a,first_air_date:i,vote_average:s,popularity:c,id:l})=>{const d=`\n        <div class="movie-card__rating-wrp">\n        <div class="movie-card__rating">${s?s.toFixed(1):c.toFixed(1)}</div>\n        </div>\n        `;return`\n\t<li class="trending-movie__card">\n\t\t<img\n\t\t\tclass="trending-movie__img"\n\t\t\tsrc="${t?`https://image.tmdb.org/t/p/w500${t}`:url}"\n\t\t\talt="${e||a}"\n\t\t\tloading="lazy"\n      data-id="${l}"\n\t\t/>\n\t\t<div class="wrapper">\n\t\t\t<p class="movie-card__title">\n\t\t\t\t${e?e.toUpperCase():a.toUpperCase()} </p>\n\t\t\t\t<div class="movie-card__wrp">\n\t\t\t\t<div class="movie-card__genre-wrp">\n\t\t\t\t${o?genreCode:""}\n\t\t\t\t</div>\n\t\t\t\t<div class="movie-card__year card-info">${n?parseFloat(n)||"":parseFloat(i)||""} </div>\n\t\t\t\t<div class="rating-wrapper">\n\t\t\t\t${s>0?d:""}</div>\n\t\t\t\t</div>\n\t\t</div>\n\t</li>`})).join("");m.innerHTML=t}s.btnLogin.addEventListener("click",(async()=>{const e=txtEmail.value,t=txtPassword.value;try{await(0,l.signInWithEmailAndPassword)(p,e,t)}catch(e){console.log(`There was an error: ${e}`),(0,s.showLoginError)(e)}})),s.btnSignup.addEventListener("click",(async()=>{const e=txtEmail.value,t=txtPassword.value;try{const n=await(0,l.createUserWithEmailAndPassword)(p,e,t),o=(0,d.doc)(u,"users",n.user.uid);(async()=>{try{await(0,d.setDoc)(o,{email:e}),console.log("This user has been written to the Firestore")}catch{console.log(`I got an error! ${error}`)}})(),console.log("This user has been written to the database")}catch(e){console.log(`There was an error: ${e}`),(0,s.showLoginError)(e)}})),s.btnLogout.addEventListener("click",(async()=>{await(0,l.signOut)(p)})),(async()=>{(0,l.onAuthStateChanged)(p,(e=>{e?((0,s.showApp)(),(0,s.showLoginState)(e),(0,s.hideLoginError)()):((0,s.showLoginForm)(),lblAuthState.innerHTML="You're not logged in.")}))})();h.addEventListener("click",(async()=>{const e=await(async()=>{let e=[];const t=p.currentUser;if(null!==t){console.log("Generating watched list");const n=(0,d.collection)(u,"users",t.uid,"watched");return(async()=>{try{return(await(0,d.getDocs)(n)).forEach((t=>{e.push(t.id)})),e}catch{console.log(`I got an error! ${error}`)}})()}console.log("You're not logged in.")})();try{y(await w(e))}catch(e){console.log(e.message)}})),v.addEventListener("click",(async()=>{const e=await(async()=>{let e=[];const t=p.currentUser;if(null!==t){console.log("Generating queue list");const n=(0,d.collection)(u,"users",t.uid,"queue");return(async()=>{try{return(await(0,d.getDocs)(n)).forEach((t=>{e.push(t.id)})),e}catch{console.log(`I got an error! ${error}`)}})()}console.log("You're not logged in.")})();try{y(await w(e))}catch(e){console.log(e.message)}}));
//# sourceMappingURL=library.165f4a6e.js.map
